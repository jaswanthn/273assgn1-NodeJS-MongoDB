{
  "name": "timothy",
  "version": "0.1.19",
  "description": "Node.js library for running Hadoop jobs",
  "keywords": [
    "hadoop",
    "map-reduce"
  ],
  "author": {
    "name": "Forward Internet Group",
    "email": "<abhinay.mehta@forward.co.uk"
  },
  "engines": {
    "node": ">=0.6.1"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/forward/timothy.git"
  },
  "licenses": [
    {
      "type": "LGPL V3",
      "url": "http://www.gnu.org/licenses/lgpl.html"
    }
  ],
  "readme": "timothy: Node.js library for writing Hadoop MapReduce jobs in JS\n===============================================================\n\nTimothy's primary goal is to make Hadoop's Yellow Elephant rich and famous.\n\n## Installation\n\n    npm install timothy\n\n## Basic Example\n\n```javascript\n    // require timothy\n    require('timothy')\n        // basic configuration for the job: hadoop conf, input, output, name, etc\n        .configure({\t\n             hadoopHome: \"/path/to/hadoop/home\" // this can be provided from environment\n             config: \"./hadoop.xml\",\n             input:  \"/test.txt\",\n             output: \"/processed_\"+(new Date().getTime()),\n             name:   \"Timothy Word Count Example\",\n             \"mapred.map.tasks\": 10 // properties can also be passed\n        })\n        // map function: one (line) or two (key, value) arguments\n        .map(function(line){\n            var words = line.split(\" \");\n            for(var i=0; i<words.length; i++)\n                this.emit(words[i], 1); // this.emit is used to generate output\n        })\n        // reduce function: two arguments (key, value)\n        .reduce(function(word,counts){\n            emit(word, counts.length); // emit is part of object so can be called without the 'this' qualification\n        })\n        // run function, creates the job, uploads it and blocks until \n        // the execution has finished\n        .run();\n```\n\n## Testing in the local machine\n\n```javascript\n    require('timothy')\n        .map(function(line){\n            var words = line.split(\" \");\n            for(var i=0; i<words.length; i++)\n                this.emit(words[i], 1);\n        })\n        .reduce(function(word,counts){\n            this.emit(word, counts.length);\n        })\n        // runLocal can be used instead of run to simulate the job execution \n        // from the command line\n        .runLocal(\"~/Desktop/test_input.txt\");\n```\n\n## Initialising a job\n\n```javascript\n    require('timothy')\n        .configure({\t\n             config: \"./hadoop.xml\",\n             input:  \"/test.txt\",\n             output: \"/processed_\"+(new Date().getTime()),\n             name:   \"Timothy Word Count Example\"\n        })\n        // global variables and functions will be available in the map and reduce functions\n        .setup(function(){\n            x = 0;\n            inc = function() {\n                x = x + 1;\n            };\n        })\n        .map(function(line){\n            var words = line.split(\" \");\n            for(var i=0; i<words.length; i++) {\n                inc();\n                this.emit(words[i], x);\n            }\n        })\n        .reduce(function(word,counts){\n            this.emit(word, counts.length);\n        })\n        .run();\n```\n\n## Passing Environment Variables\n\n```javascript\n    (function(offset1,offset2){\n\n        require('timothy')\n            .configure({\t\n                 config: \"./hadoop.xml\",\n                 input:  \"/test.txt\",\n                 output: \"/processed_\"+(new Date().getTime()),\n                 name:   \"Timothy Word Count Example\",\n                 //environment variables\n                 cmdenv: \"offset1=\"+offset1+\",offset2=\"+offset2 \n            })\n            .map(function(line){\n    \t        // mapper and reducer process can now access\n                // the variables through process.env\n                var offset1 = parseInt(process.env['offset1']);\n                var words = line.split(\" \");\n                for(var i=0; i<words.length; i++)\n                    this.emit(words[i], 1+offset1);\n            })\n            .reduce(function(word,counts){\n                var offset2 = parseInt(process.env['offset2']);\n                this.emit(word, counts.length+offset2);\n            })\n            .run();\n\n    })(10,40);\n```\n\n## Using node libraries\n\n```javascript\n    require('timothy')\n        .configure({\t\n             config: \"./hadoop.xml\",\n             input:  \"/test.txt\",\n             output: \"/processed_\"+(new Date().getTime()),\n             name:   \"Timothy Word Count Example\"\n        })\n        // Libraries can be added using the same syntax as\n        // in a NPM package.json file\n        .dependencies({\"node-uuid\":\"1.3.3\"})\n        .setup(function(){\n            // libraries can be required in the setup function\n            uuid = require('node-uuid');\n        })\n        .map(function(line){\n            var words = line.split(\" \");\n            for(var i=0; i<words.length; i++) {\n                   this.emit(words[i], 1);\n            }\n        })\n        .reduce(function(word,counts){\n            this.emit(word, counts.length);\n            this.emit(uuid.v1(),\"10000000\");\n        })\n        .run();\n```\n\n## Status and counters\n\nStatus and counters for the job can be updated using the *this.updateStatus* and *this.updateCounter* functions.\n\n## Caveats\n\n*map*, *reduce* and *setup* functions are used as templates for the job functions. Trying to use values from these function definition closures will fail when running the actual job. Use the 'cmdenv' configuration to pass values to the job instead.\n\nAt the moment, the *setup* function does not handle blocking asynchronous operations. If one of these operations is invoked, the script will continue executing the *map*/*reduce* function before the asynchronous callback is executed.\n\n\n## About\n\nForward Internet Group (c) 2012. Available under the LGPL V3 license.\n\n<forward-timothy@googlegroups.com>, <abhinay.mehta@forward.co.uk>, <antonio.garrote@forward.co.uk>\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/forward/timothy/issues"
  },
  "_id": "timothy@0.1.19",
  "dist": {
    "shasum": "37465dd513c5952efaf4b4662c31beb4c397eea6"
  },
  "_from": "timothy@",
  "_resolved": "https://registry.npmjs.org/timothy/-/timothy-0.1.19.tgz"
}
